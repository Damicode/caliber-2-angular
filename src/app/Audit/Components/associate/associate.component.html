<div class="container">
    <div class="categoriesContainer">
        <strong>Categories covered this week: </strong>
        <div class="categories" style="overflow-y: auto;">
        <span *ngFor="let tag of categoryTags | keyvalue" class="label label-default" style="float: left;">
            {{ tag.value.content }}
            <span class="closeChip" (click)="removeCategoryTag($event)">&times;</span>
        </span>
        <span class="label label-default btn dropdown-toggle" style="background-color: #F26925; float: left;" data-toggle="dropdown">
            <i class="fa fa-plus"></i>
            <ul class="dropdown-menu">
                <li *ngFor="let category of hardCodedCategories" (click)="addCategoryTag(category.content)">
                    <a routerLink="#">{{ category.content }}</a>
                </li>
            </ul>
        </span>
        </div>
    </div>
    <br>
    <span>
        <button class="btn btn-primary" (click)="toggleNotesArray()" id="toggleNoteSort">Sort
            {{order}}</button>
    </span>
    <!-- The max width is manually set to the same width as the original AngularJss webpage -->
    <table class="table table-responsive table-condensed" style="border-collapse: collapse; max-width: 1140px;">
        <thead>
            <tr>
                <!-- Spans over flag column --->
                <th colspan="2">
                    Trainee
                </th>
                <!-- Spans over extra space column --->
                <th colspan="2">
                    Individual Feedback
                </th>
                <th>
                    Notes
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Every note contains an associate in the current batch -->
            <!-- Every column is given a percentage of the table for simplicity -->
            <tr *ngFor="let QcNote of notes">
                <td (click)="cycleFlagNotesInput(QcNote.noteId, true); cycleFlag(QcNote.noteId);" style="width: 11%;">
                    {{ QcNote.trainee.name }}
                </td>
                <td style="width: 3%; position:absolute;">
                    <!-- Only shows the current flag, none if no flag is assigned -->
                    <i *ngIf="QcNote.trainee.flagStatus==='RED'" class="glyphicon glyphicon-flag color-red"></i>
                    <i *ngIf="QcNote.trainee.flagStatus==='GREEN'" class="glyphicon glyphicon-flag color-green"></i>
                    <i *ngIf="QcNote.trainee.flagStatus==='NONE'" class="glyphicon glyphicon-flag"
                        style="visibility: hidden;"></i>
                    <!-- Shows the flag notes popup if the user clicks the name column -->
                    <div *ngIf="QcNote.noteFlagInputActive===true" class="flag-notes-popup">
                        <input class="form-control" type="text" placeholder=" comment" />
                        <button class="btn btn-info flage-notes-save-btn">Save</button>
                        <button (click)="cycleFlagNotesInput(QcNote.noteId, false)" type="button"
                            class="flage-notes-close-btn close" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </td>
                <td>
                    <div class="dropdown">
                        <div>
                            <i *ngIf="QcNote.qcStatus=='Undefined'"
                                class="qcStatusIcon fa fa-question-circle fa-2x pick"
                                style="margin: auto 30px; text-align: center;"></i>
                            <i *ngIf="QcNote.qcStatus=='Superstar'" class="qcStatusIcon fa fa-star fa-2x pick"
                                style="margin: auto 30px; text-align: center;"></i>
                            <i *ngIf="QcNote.qcStatus=='Good'" class="qcStatusIcon fa fa-smile-o fa-2x pick"
                                style="margin: auto 30px;text-align: center;"></i>
                            <i *ngIf="QcNote.qcStatus=='Average'" class="qcStatusIcon fa fa-meh-o fa-2x pick"
                                style="margin: auto 30px; text-align: center;"></i>
                            <i *ngIf="QcNote.qcStatus=='Poor'" class="qcStatusIcon fa fa-frown-o fa-2x pick"
                                style="margin: auto 30px; text-align: center;"></i>
                        </div>
                        <div class="dropdown-content" style="margin: auto -95px">
                            <a data-toggle="collapse" (click)="setScore('Undefined',QcNote.noteId);"
                                class="qcStatusIcon fa fa-question-circle fa-2x pick no-padding"></a>
                            <a data-toggle="collapse" (click)="setScore('Superstar',QcNote.noteId);"
                                class="qcStatusIcon fa fa-star fa-2x pick no-padding"></a>
                            <a data-toggle="collapse" (click)="setScore('Good',QcNote.noteId);"
                                class="qcStatusIcon fa fa-smile-o fa-2x pick no-padding"></a>
                            <a data-toggle="collapse" (click)="setScore('Average',QcNote.noteId); "
                                class="qcStatusIcon fa fa-meh-o fa-2x pick no-padding"></a>
                            <a data-toggle="collapse" (click)="setScore('Poor', QcNote.noteId); "
                                class="qcStatusIcon fa fa-frown-o fa-2x pick no-padding"></a>
                        </div>
                    </div>
                </td>
                <!-- This is a small gap to add space in between columns -->
                <td style="width: 3%;"></td>
                <td style="width: 76%;">
                    <textarea (blur)="noteOnBlur(QcNote.noteId, false)" [(ngModel)]="QcNote.content"
                        id="note-textarea-{{QcNote.noteId}}" class="form-control"
                        placeholder="Note on {{ QcNote.trainee.name }}" rows="3" cols="75"
                        maxlength="4000">{{ QcNote.content }}</textarea>
                </td>
            </tr>
        </tbody>
    </table>
</div>